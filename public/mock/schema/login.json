{
  "data": {
    "mode": "login",
    "form": {
      "username": "admin",
      "password": "123456"
    },
    "resetForm": {
      "phone": "",
      "code": "",
      "newPassword": "",
      "confirmPassword": ""
    },
    "loading": false,
    "rememberMe": false,
    "countdown": 0,
    "rules": {
      "username": [
        { "required": true, "message": "请输入用户名", "trigger": "blur" }
      ],
      "password": [
        { "required": true, "message": "请输入密码", "trigger": "blur" },
        { "min": 6, "message": "密码长度不能少于6位", "trigger": "blur" }
      ]
    },
    "resetRules": {
      "phone": [
        { "required": true, "message": "请输入手机号", "trigger": "blur" },
        { "pattern": "^1[3-9]\\d{9}$", "message": "请输入正确的手机号", "trigger": "blur" }
      ],
      "code": [
        { "required": true, "message": "请输入验证码", "trigger": "blur" },
        { "len": 6, "message": "验证码为6位数字", "trigger": "blur" }
      ],
      "newPassword": [
        { "required": true, "message": "请输入新密码", "trigger": "blur" },
        { "min": 6, "message": "密码长度不能少于6位", "trigger": "blur" }
      ],
      "confirmPassword": [
        { "required": true, "message": "请再次输入密码", "trigger": "blur" }
      ]
    }
  },
  "com": "div",
  "props": {
    "style": {
      "minHeight": "100vh",
      "display": "flex",
      "flexDirection": "column",
      "justifyContent": "center",
      "alignItems": "center",
      "position": "relative",
      "overflow": "hidden",
      "background": "#f8f9fc"
    }
  },
  "children": [
    {
      "com": "div",
      "props": {
        "innerHTML": "<svg viewBox='0 0 1000 600' preserveAspectRatio='xMidYMid slice' style='position:absolute;top:0;left:0;width:100%;height:60%;pointer-events:none;filter:saturate(0.5);'><defs><linearGradient id='lg1' x1='0%' y1='0%' x2='100%' y2='100%'><stop offset='0%' style='stop-color:rgb(var(--primary-400-color));stop-opacity:0.2'/><stop offset='100%' style='stop-color:rgb(var(--primary-300-color));stop-opacity:0.1'/></linearGradient><linearGradient id='lg2' x1='100%' y1='0%' x2='0%' y2='100%'><stop offset='0%' style='stop-color:rgb(var(--primary-300-color));stop-opacity:0.15'/><stop offset='100%' style='stop-color:rgb(var(--primary-200-color));stop-opacity:0.08'/></linearGradient><linearGradient id='lg3' x1='0%' y1='100%' x2='100%' y2='0%'><stop offset='0%' style='stop-color:rgb(var(--primary-500-color));stop-opacity:0.12'/><stop offset='100%' style='stop-color:rgb(var(--primary-400-color));stop-opacity:0.06'/></linearGradient></defs><path stroke='url(#lg1)' stroke-width='1.5' fill='none'><animate attributeName='d' dur='20s' repeatCount='indefinite' values='M0,150 Q200,100 400,180 T800,120 T1000,160;M0,120 Q200,180 400,100 T800,180 T1000,130;M0,180 Q200,120 400,160 T800,100 T1000,150;M0,150 Q200,100 400,180 T800,120 T1000,160'/></path><path stroke='url(#lg2)' stroke-width='1' fill='none'><animate attributeName='d' dur='25s' repeatCount='indefinite' values='M0,250 Q250,200 500,280 T1000,220;M0,220 Q250,280 500,200 T1000,260;M0,280 Q250,220 500,260 T1000,200;M0,250 Q250,200 500,280 T1000,220'/></path><path stroke='url(#lg1)' stroke-width='0.8' fill='none' opacity='0.6'><animate attributeName='d' dur='18s' repeatCount='indefinite' values='M0,80 Q300,120 600,60 T1000,100;M0,100 Q300,60 600,120 T1000,70;M0,60 Q300,100 600,80 T1000,110;M0,80 Q300,120 600,60 T1000,100'/></path><path stroke='url(#lg3)' stroke-width='1.2' fill='none'><animate attributeName='d' dur='22s' repeatCount='indefinite' values='M0,320 Q180,280 360,340 T720,300 T1000,330;M0,300 Q180,340 360,280 T720,340 T1000,290;M0,340 Q180,300 360,320 T720,280 T1000,320;M0,320 Q180,280 360,340 T720,300 T1000,330'/></path><path stroke='url(#lg2)' stroke-width='0.6' fill='none' opacity='0.5'><animate attributeName='d' dur='28s' repeatCount='indefinite' values='M0,400 Q200,360 400,420 T800,380 T1000,410;M0,380 Q200,420 400,360 T800,420 T1000,370;M0,420 Q200,380 400,400 T800,360 T1000,400;M0,400 Q200,360 400,420 T800,380 T1000,410'/></path><circle r='3' style='fill:rgb(var(--primary-400-color));fill-opacity:0.25'><animate attributeName='cx' dur='15s' repeatCount='indefinite' values='100;300;100'/><animate attributeName='cy' dur='12s' repeatCount='indefinite' values='150;200;150'/></circle><circle r='2' style='fill:rgb(var(--primary-300-color));fill-opacity:0.3'><animate attributeName='cx' dur='18s' repeatCount='indefinite' values='700;500;700'/><animate attributeName='cy' dur='14s' repeatCount='indefinite' values='100;180;100'/></circle><circle r='3.5' style='fill:rgb(var(--primary-500-color));fill-opacity:0.2'><animate attributeName='cx' dur='22s' repeatCount='indefinite' values='400;600;400'/><animate attributeName='cy' dur='16s' repeatCount='indefinite' values='250;180;250'/></circle><circle r='2.5' style='fill:rgb(var(--primary-400-color));fill-opacity:0.22'><animate attributeName='cx' dur='20s' repeatCount='indefinite' values='850;650;850'/><animate attributeName='cy' dur='18s' repeatCount='indefinite' values='300;220;300'/></circle><circle r='1.8' style='fill:rgb(var(--primary-300-color));fill-opacity:0.28'><animate attributeName='cx' dur='16s' repeatCount='indefinite' values='200;350;200'/><animate attributeName='cy' dur='20s' repeatCount='indefinite' values='350;280;350'/></circle><circle r='2.2' style='fill:rgb(var(--primary-500-color));fill-opacity:0.18'><animate attributeName='cx' dur='24s' repeatCount='indefinite' values='550;400;550'/><animate attributeName='cy' dur='15s' repeatCount='indefinite' values='80;150;80'/></circle><circle r='1.5' style='fill:rgb(var(--primary-400-color));fill-opacity:0.25'><animate attributeName='cx' dur='19s' repeatCount='indefinite' values='920;780;920'/><animate attributeName='cy' dur='17s' repeatCount='indefinite' values='180;120;180'/></circle><circle r='2.8' style='fill:rgb(var(--primary-300-color));fill-opacity:0.2'><animate attributeName='cx' dur='21s' repeatCount='indefinite' values='50;180;50'/><animate attributeName='cy' dur='19s' repeatCount='indefinite' values='280;350;280'/></circle></svg>",
        "style": { "position": "absolute", "inset": "0", "pointerEvents": "none" }
      }
    },
    {
      "com": "style",
      "children": ".wave-container { position: absolute; bottom: 0; left: 0; width: 100%; height: 85%; overflow: hidden; pointer-events: none; filter: saturate(0.6); } .wave { position: absolute; left: 0; width: 200%; display: flex; animation: waveAnim 10s linear infinite; } .wave svg { flex: 0 0 50%; height: 100%; display: block; } .wave1 { animation-duration: 21s; bottom: 0; height: 100%; } .wave2 { animation-duration: 18s; bottom: 0; height: 75%; } .wave3 { animation-duration: 15s; bottom: 0; height: 50%; } .wave4 { animation-duration: 12s; bottom: 0; height: 30%; } @keyframes waveAnim { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }"
    },
    {
      "com": "div",
      "props": { "class": "wave-container" },
      "children": [
        {
          "com": "div",
          "props": {
            "class": "wave wave1",
            "innerHTML": "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 200' preserveAspectRatio='none'><path d='M0,100 C200,110 400,90 600,100 C800,110 1000,90 1200,100 L1200,200 L0,200 Z' style='fill:rgb(var(--primary-200-color))'/></svg><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 200' preserveAspectRatio='none'><path d='M0,100 C200,110 400,90 600,100 C800,110 1000,90 1200,100 L1200,200 L0,200 Z' style='fill:rgb(var(--primary-200-color))'/></svg>"
          }
        },
        {
          "com": "div",
          "props": {
            "class": "wave wave2",
            "innerHTML": "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 200' preserveAspectRatio='none'><path d='M0,100 C200,130 400,70 600,100 C800,130 1000,70 1200,100 L1200,200 L0,200 Z' style='fill:rgb(var(--primary-300-color))'/></svg><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 200' preserveAspectRatio='none'><path d='M0,100 C200,130 400,70 600,100 C800,130 1000,70 1200,100 L1200,200 L0,200 Z' style='fill:rgb(var(--primary-300-color))'/></svg>"
          }
        },
        {
          "com": "div",
          "props": {
            "class": "wave wave3",
            "innerHTML": "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 200' preserveAspectRatio='none'><path d='M0,100 C200,160 400,40 600,100 C800,160 1000,40 1200,100 L1200,200 L0,200 Z' style='fill:rgb(var(--primary-400-color))'/></svg><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 200' preserveAspectRatio='none'><path d='M0,100 C200,160 400,40 600,100 C800,160 1000,40 1200,100 L1200,200 L0,200 Z' style='fill:rgb(var(--primary-400-color))'/></svg>"
          }
        },
        {
          "com": "div",
          "props": {
            "class": "wave wave4",
            "innerHTML": "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 200' preserveAspectRatio='none'><path d='M0,100 C200,195 400,5 600,100 C800,195 1000,5 1200,100 L1200,200 L0,200 Z' style='fill:rgb(var(--primary-500-color))'/></svg><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 200' preserveAspectRatio='none'><path d='M0,100 C200,195 400,5 600,100 C800,195 1000,5 1200,100 L1200,200 L0,200 Z' style='fill:rgb(var(--primary-500-color))'/></svg>"
          }
        }
      ]
    },
    {
      "com": "div",
      "props": {
        "innerHTML": "<svg viewBox='0 0 1000 300' preserveAspectRatio='none' style='position:absolute;top:0;left:0;width:100%;height:40%;transform:rotate(180deg)'><defs><linearGradient id='tg1' x1='0%' y1='0%' x2='100%' y2='0%'><stop offset='0%'><animate attributeName='stop-color' values='rgba(255,255,255,0.3);rgba(255,255,255,0.1);rgba(255,255,255,0.2);rgba(255,255,255,0.3)' dur='10s' repeatCount='indefinite'/></stop><stop offset='100%'><animate attributeName='stop-color' values='rgba(255,255,255,0.1);rgba(255,255,255,0.25);rgba(255,255,255,0.15);rgba(255,255,255,0.1)' dur='10s' repeatCount='indefinite'/></stop></linearGradient></defs><path fill='url(#tg1)'><animate attributeName='d' dur='14s' repeatCount='indefinite' values='M0,100 Q250,50 500,100 T1000,100 L1000,300 L0,300 Z;M0,80 Q250,130 500,80 T1000,80 L1000,300 L0,300 Z;M0,100 Q250,50 500,100 T1000,100 L1000,300 L0,300 Z'/></path></svg>",
        "style": { "position": "absolute", "inset": "0", "pointerEvents": "none" }
      }
    },
    {
      "com": "NCard",
      "props": {
        "bordered": false,
        "style": {
          "width": "400px",
          "borderRadius": "20px",
          "boxShadow": "0 25px 50px -12px rgba(0, 0, 0, 0.25)",
          "background": "rgba(255, 255, 255, 0.95)",
          "backdropFilter": "blur(20px)",
          "WebkitBackdropFilter": "blur(20px)",
          "zIndex": "10"
        },
        "contentStyle": {
          "padding": "40px"
        }
      },
      "children": [
        {
          "com": "NFlex",
          "props": {
            "align": "center",
            "justify": "center",
            "style": { "marginBottom": "32px", "gap": "12px" }
          },
          "children": [
            {
              "com": "img",
              "props": {
                "src": "/favicon.svg",
                "style": { "width": "48px", "height": "48px" }
              }
            },
            {
              "com": "NFlex",
              "props": {
                "vertical": true,
                "style": { "gap": "2px" }
              },
              "children": [
                {
                  "com": "NText",
                  "props": {
                    "strong": true,
                    "style": { "fontSize": "24px", "lineHeight": "1.2" }
                  },
                  "children": "Trix Admin"
                },
                {
                  "com": "NText",
                  "props": {
                    "depth": 3,
                    "style": { "fontSize": "12px" }
                  },
                  "children": "JSON 驱动的后台管理系统"
                }
              ]
            }
          ]
        },
        {
          "com": "div",
          "if": "mode === 'login'",
          "children": [
            {
              "com": "NForm",
              "props": {
                "model": "{{ form }}",
                "rules": "{{ rules }}",
                "showLabel": false
              },
              "children": [
                {
                  "com": "NFormItem",
                  "props": { "path": "username" },
                  "children": [
                    {
                      "com": "NInput",
                      "model": "form.username",
                      "props": { "placeholder": "用户名", "size": "large", "clearable": true },
                      "slots": {
                        "prefix": [
                          {
                            "com": "NIcon",
                            "props": { "style": { "color": "#999" } },
                            "children": [{ "com": "SvgIcon", "props": { "icon": "carbon:user" } }]
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "com": "NFormItem",
                  "props": { "path": "password" },
                  "children": [
                    {
                      "com": "NInput",
                      "model": "form.password",
                      "props": { "type": "password", "placeholder": "密码", "size": "large", "showPasswordOn": "click", "clearable": true },
                      "slots": {
                        "prefix": [
                          {
                            "com": "NIcon",
                            "props": { "style": { "color": "#999" } },
                            "children": [{ "com": "SvgIcon", "props": { "icon": "carbon:password" } }]
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "com": "NFlex",
                  "props": { "justify": "space-between", "align": "center", "style": { "marginBottom": "24px" } },
                  "children": [
                    { "com": "NCheckbox", "model:checked": "rememberMe", "children": "记住我" },
                    {
                      "com": "NButton",
                      "props": { "text": true, "type": "primary" },
                      "events": {
                        "click": { "set": "mode", "value": "reset" }
                      },
                      "children": "忘记密码？"
                    }
                  ]
                },
                {
                  "com": "NButton",
                  "props": {
                    "type": "primary",
                    "block": true,
                    "size": "large",
                    "loading": "{{ loading }}",
                    "attrType": "submit",
                    "style": { "height": "44px", "fontSize": "16px" }
                  },
                  "events": {
                    "click": { "script": "state.loading = true; try { await $methods.login(state.form.username, state.form.password); } finally { state.loading = false; }" }
                  },
                  "children": "登 录"
                }
              ]
            },
            {
              "com": "NDivider",
              "props": { "style": { "margin": "24px 0" } },
              "children": [{ "com": "NText", "props": { "depth": 3, "style": { "fontSize": "12px" } }, "children": "其他登录方式" }]
            },
            {
              "com": "NFlex",
              "props": { "justify": "center", "style": { "gap": "24px" } },
              "children": [
                {
                  "com": "NButton",
                  "props": { "circle": true, "quaternary": true, "style": { "width": "44px", "height": "44px" } },
                  "children": [{ "com": "SvgIcon", "props": { "icon": "carbon:logo-github", "style": { "fontSize": "20px", "color": "#666" } } }]
                },
                {
                  "com": "NButton",
                  "props": { "circle": true, "quaternary": true, "style": { "width": "44px", "height": "44px" } },
                  "children": [{ "com": "SvgIcon", "props": { "icon": "carbon:logo-wechat", "style": { "fontSize": "20px", "color": "#07c160" } } }]
                },
                {
                  "com": "NButton",
                  "props": { "circle": true, "quaternary": true, "style": { "width": "44px", "height": "44px" } },
                  "children": [{ "com": "SvgIcon", "props": { "icon": "carbon:email", "style": { "fontSize": "20px", "color": "#1890ff" } } }]
                }
              ]
            }
          ]
        },
        {
          "com": "div",
          "if": "mode === 'reset'",
          "children": [
            {
              "com": "NFlex",
              "props": { "align": "center", "style": { "marginBottom": "24px" } },
              "children": [
                {
                  "com": "NButton",
                  "props": { "text": true, "style": { "padding": "0" } },
                  "events": {
                    "click": [
                      { "set": "mode", "value": "login" },
                      { "set": "resetForm", "value": "{{ ({ phone: '', code: '', newPassword: '', confirmPassword: '' }) }}" },
                      { "set": "countdown", "value": 0 }
                    ]
                  },
                  "children": [
                    { "com": "SvgIcon", "props": { "icon": "carbon:arrow-left", "style": { "fontSize": "18px" } } }
                  ]
                },
                {
                  "com": "NText",
                  "props": { "strong": true, "style": { "fontSize": "18px", "marginLeft": "12px" } },
                  "children": "重置密码"
                }
              ]
            },
            {
              "com": "NForm",
              "props": {
                "model": "{{ resetForm }}",
                "rules": "{{ resetRules }}",
                "showLabel": false
              },
              "children": [
                {
                  "com": "NFormItem",
                  "props": { "path": "phone" },
                  "children": [
                    {
                      "com": "NInput",
                      "model": "resetForm.phone",
                      "props": { "placeholder": "手机号", "size": "large", "clearable": true, "maxlength": 11 },
                      "slots": {
                        "prefix": [
                          {
                            "com": "NIcon",
                            "props": { "style": { "color": "#999" } },
                            "children": [{ "com": "SvgIcon", "props": { "icon": "carbon:phone" } }]
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "com": "NFormItem",
                  "props": { "path": "code" },
                  "children": [
                    {
                      "com": "NInputGroup",
                      "children": [
                        {
                          "com": "NInput",
                          "model": "resetForm.code",
                          "props": { "placeholder": "验证码", "size": "large", "clearable": true, "maxlength": 6, "style": { "flex": "1" } },
                          "slots": {
                            "prefix": [
                              {
                                "com": "NIcon",
                                "props": { "style": { "color": "#999" } },
                                "children": [{ "com": "SvgIcon", "props": { "icon": "carbon:security" } }]
                              }
                            ]
                          }
                        },
                        {
                          "com": "NButton",
                          "props": {
                            "type": "primary",
                            "size": "large",
                            "disabled": "{{ countdown > 0 || !resetForm.phone }}",
                            "style": { "width": "120px" }
                          },
                          "events": {
                            "click": {
                              "script": "if (!/^1[3-9]\\d{9}$/.test(state.resetForm.phone)) { window.$message?.warning('请输入正确的手机号'); return; } state.countdown = 60; const timer = setInterval(() => { state.countdown--; if (state.countdown <= 0) clearInterval(timer); }, 1000); window.$message?.success('验证码已发送');"
                            }
                          },
                          "children": "{{ countdown > 0 ? countdown + 's' : '获取验证码' }}"
                        }
                      ]
                    }
                  ]
                },
                {
                  "com": "NFormItem",
                  "props": { "path": "newPassword" },
                  "children": [
                    {
                      "com": "NInput",
                      "model": "resetForm.newPassword",
                      "props": { "type": "password", "placeholder": "新密码", "size": "large", "showPasswordOn": "click", "clearable": true },
                      "slots": {
                        "prefix": [
                          {
                            "com": "NIcon",
                            "props": { "style": { "color": "#999" } },
                            "children": [{ "com": "SvgIcon", "props": { "icon": "carbon:password" } }]
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "com": "NFormItem",
                  "props": { "path": "confirmPassword" },
                  "children": [
                    {
                      "com": "NInput",
                      "model": "resetForm.confirmPassword",
                      "props": { "type": "password", "placeholder": "确认密码", "size": "large", "showPasswordOn": "click", "clearable": true },
                      "slots": {
                        "prefix": [
                          {
                            "com": "NIcon",
                            "props": { "style": { "color": "#999" } },
                            "children": [{ "com": "SvgIcon", "props": { "icon": "carbon:checkmark" } }]
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "com": "NButton",
                  "props": {
                    "type": "primary",
                    "block": true,
                    "size": "large",
                    "style": { "height": "44px", "fontSize": "16px", "marginTop": "8px" }
                  },
                  "events": {
                    "click": {
                      "if": "!resetForm.phone || !resetForm.code || !resetForm.newPassword || !resetForm.confirmPassword",
                      "then": { "script": "window.$message?.warning?.('请填写完整信息');" },
                      "else": {
                        "if": "resetForm.newPassword !== resetForm.confirmPassword",
                        "then": { "script": "window.$message?.error?.('两次输入的密码不一致');" },
                        "else": [
                          { "script": "window.$message?.success?.('密码重置成功');" },
                          { "set": "mode", "value": "login" },
                          { "set": "resetForm", "value": "{{ ({ phone: '', code: '', newPassword: '', confirmPassword: '' }) }}" },
                          { "set": "countdown", "value": 0 }
                        ]
                      }
                    }
                  },
                  "children": "重置密码"
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "com": "NText",
      "props": {
        "style": { "marginTop": "32px", "color": "rgba(100, 100, 100, 0.8)", "fontSize": "13px", "zIndex": "10" }
      },
      "children": "© 2024 Trix Admin. All rights reserved."
    }
  ]
}
